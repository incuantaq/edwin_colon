---
import Cotizacion from "./Cotizacion";

---
<form id="cotizador" class="flex flex-col flex-wrap md:flex-row container mx-auto py-10 pricer-wrapper">
  <div class="w-full md:w-1/2 md:pr-5">
    <h3 class="pb-4">Información de contacto</h3>
    <div>
      <input type="text" id="full_name" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 mb-3" placeholder="Nombre completo" required />
      <input type="email" id="email" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 mb-3" placeholder="Email" required />
      <input type="tel" id="phone" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 mb-3" placeholder="Telefono" required />
      <input type="text" id="address" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 mb-3" placeholder="Dirección" required />
    </div>
    <div class="text-center md:text-left w-full mt-6">
      <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Cotizar</button>
    </div>
  </div>
  <Cotizacion client:load />
</form>

   <div id='crmWebToEntityForm' class='zcwf_lblLeft crmWebToEntityForm' style='background-color: white;color: black;max-width: 600px;'>
     
  <form id='webform6418949000000513177' action='https://crm.zoho.com/crm/WebToLeadForm' name=WebToLeads6418949000000513177 method='POST' onSubmit='javascript:document.charset="UTF-8"; return checkMandatory6418949000000513177()' accept-charset='UTF-8'>
   <input type='text' style='display:none;' name='xnQsjsdp' value='ff76c1d9856ba11982b9fe58cc5b5b5596784a783ab09f6d0b12c87c0c46f7e8'></input> 
   <input type='hidden' name='zc_gad' id='zc_gad' value=''></input>
   <input type='text' style='display:none;' name='xmIwtLD' value='375e5be0d427f26b5e6271efa8d236c4bef168952e3c7f446314923b0e528845c1802b3b81e26c85098272d50d7790d1'></input> 
   <input type='text'  style='display:none;' name='actionType' value='TGVhZHM='></input>
   <input type='text' style='display:none;' name='returnURL' value='https&#x3a;&#x2f;&#x2f;edwin-colon.vercel.app&#x2f;thank-you' > </input>

  <div class='zcwf_title' style='max-width: 600px;color: black; font-family:Arial;'>Sales</div><div class='zcwf_row'><div class='zcwf_col_lab' style='font-size:12px; font-family: Arial;'><label for='First_Name'>First Name</label></div><div class='zcwf_col_fld'><input type='text' id='First_Name' aria-required='false' aria-label='First Name' name='First Name' aria-valuemax='40' maxlength='40'></input><div class='zcwf_col_help'></div></div></div><div class='zcwf_row'><div class='zcwf_col_lab' style='font-size:12px; font-family: Arial;'><label for='Last_Name'>Last Name<span style='color:red;'>*</span></label></div><div class='zcwf_col_fld'><input type='text' id='Last_Name' aria-required='true' aria-label='Last Name' name='Last Name' aria-valuemax='80' maxlength='80'></input><div class='zcwf_col_help'></div></div></div><div class='zcwf_row'><div class='zcwf_col_lab' style='font-size:12px; font-family: Arial;'><label for='Email'>Email</label></div><div class='zcwf_col_fld'><input type='text' ftype='email' autocomplete='false' id='Email' aria-required='false' aria-label='Email' name='Email' aria-valuemax='100' crmlabel='' maxlength='100'></input><div class='zcwf_col_help'></div></div></div><div class='zcwf_row'><div class='zcwf_col_lab' style='font-size:12px; font-family: Arial;'><label for='Mobile'>Mobile</label></div><div class='zcwf_col_fld'><input type='text' id='Mobile' aria-required='false' aria-label='Mobile' name='Mobile' aria-valuemax='30' maxlength='30'></input><div class='zcwf_col_help'></div></div></div><div class='zcwf_row'><div class='zcwf_col_lab' style='font-size:12px; font-family: Arial;'><label for='Street'>Street</label></div><div class='zcwf_col_fld'><input type='text' id='Street' aria-required='false' aria-label='Street' name='Street' aria-valuemax='250' maxlength='250'></input><div class='zcwf_col_help'></div></div></div><div class='zcwf_row wfrm_fld_dpNn'><div class='zcwf_col_lab' style='font-size:12px; font-family: Arial;'><label for='Lead_Source'>Lead Source</label></div><div class='zcwf_col_fld'><select class='zcwf_col_fld_slt' role='combobox' aria-expanded='false' aria-haspopup='listbox' id='Lead_Source' onChange='addAriaSelected6418949000000513177()' aria-required='false' aria-label='Lead Source' name='Lead Source'  >
        <option value='-None-'>-None-</option>
        <option value='Advertisement'>Advertisement</option>
        <option value='Cold&#x20;Call'>Cold Call</option>
        <option value='Employee&#x20;Referral'>Employee Referral</option>
        <option value='External&#x20;Referral'>External Referral</option>
      <option selected value='Online&#x20;Store'>Online Store</option>
        <option value='X&#x20;&#x28;Twitter&#x29;'>X &#x28;Twitter&#x29;</option>
        <option value='Facebook'>Facebook</option>
        <option value='Partner'>Partner</option>
        <option value='Public&#x20;Relations'>Public Relations</option>
        <option value='Sales&#x20;Email&#x20;Alias'>Sales Email Alias</option>
        <option value='Seminar&#x20;Partner'>Seminar Partner</option>
        <option value='Internal&#x20;Seminar'>Internal Seminar</option>
        <option value='Trade&#x20;Show'>Trade Show</option>
        <option value='Web&#x20;Download'>Web Download</option>
        <option value='Web&#x20;Research'>Web Research</option>
        <option value='Chat'>Chat</option>
      </select><div class='zcwf_col_help'></div></div></div><div class='zcwf_row'><div class='zcwf_col_lab' style='font-size:12px; font-family: Arial;'><label for='Description'>Description</label></div><div class='zcwf_col_fld'><textarea aria-multiline='true' id='Description' aria-required='false' aria-label='Description' name='Description'></textarea><div class='zcwf_col_help'></div></div></div><div class='zcwf_row'><div class='zcwf_col_lab'></div><div class='zcwf_col_fld'><input type='submit' id='formsubmit' role='button' class='formsubmit zcwf_button' value='Submit' aria-label='Submit' title='Submit'><input type='reset' class='zcwf_button' role='button' name='reset' value='Reset' aria-label='Reset' title='Reset'></div></div>

    </form>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const customForm = document.getElementById('cotizador');
      const zohoForm = document.getElementById('webform6418949000000513177') as HTMLFormElement;
  
      customForm.addEventListener('submit', function(e) {
        e.preventDefault();
  
        const fullName = (document.getElementById('full_name') as HTMLInputElement).value;
        const email = (document.getElementById('email') as HTMLInputElement).value;
        const phone = (document.getElementById('phone') as HTMLInputElement).value;
        const address = (document.getElementById('address') as HTMLInputElement).value;
  
        // Split full name into first and last name
        const nameParts = fullName.split(' ');
        const firstName = nameParts[0];
        const lastName = nameParts.slice(1).join(' ') || firstName;
  
        // Fill Zoho form
        (zohoForm.querySelector('#First_Name') as HTMLInputElement).value = firstName;
        (zohoForm.querySelector('#Last_Name') as HTMLInputElement).value = lastName;
        (zohoForm.querySelector('#Email') as HTMLInputElement).value = email;
        (zohoForm.querySelector('#Mobile') as HTMLInputElement).value = phone;
        (zohoForm.querySelector('#Street') as HTMLInputElement).value = address;
  
        // Get selected product
        const selectedProduct = document.querySelector('.product-picker.selected') as HTMLElement;
        const productName = selectedProduct ? selectedProduct.textContent : 'No product selected';
  
        // Set description
        (zohoForm.querySelector('#Description') as HTMLTextAreaElement).value = `Producto de interés: ${productName}`;
  
        // Submit Zoho form
        if (checkMandatory6418949000000513177()) {
          zohoForm.submit();
        }
      });
    });
  
    function validateEmail6418949000000513177() {
      let form = document.forms['WebToLeads6418949000000513177'];
      let emailFld = form.querySelectorAll('[ftype=email]');
      for (let i = 0; i < emailFld.length; i++) {
        let emailVal = emailFld[i].value;
        if((emailVal.replace(/^\s+|\s+$/g, '')).length!=0 ) {
          let atpos=emailVal.indexOf('@');
          let dotpos=emailVal.lastIndexOf('.');
          if (atpos<1 || dotpos<atpos+2 || dotpos+2>=emailVal.length) {
            alert('Please enter a valid email address. ');
            emailFld[i].focus();
            return false;
          }
        }
      }
      return true;
    }
  
    function checkMandatory6418949000000513177() {
      let mndFileds = new Array('Last Name');
      let fldLangVal = new Array('Last Name');
      for(let i=0;i<mndFileds.length;i++) {
        let fieldObj=document.forms['WebToLeads6418949000000513177'][mndFileds[i]];
        if(fieldObj) {
          if (((fieldObj.value).replace(/^\s+|\s+$/g, '')).length==0) {
            alert(fldLangVal[i] +' cannot be empty.');
            fieldObj.focus();
            return false;
          } else if(fieldObj.nodeName=='SELECT') {
            if(fieldObj.options[fieldObj.selectedIndex].value=='-None-') {
              alert(fldLangVal[i] +' cannot be none.');
              fieldObj.focus();
              return false;
            }
          } else if(fieldObj.type =='checkbox'){
            if(fieldObj.checked == false){
              alert('Please accept  '+fldLangVal[i]);
              fieldObj.focus();
              return false;
            }
          }
        }
      }
      if(!validateEmail6418949000000513177()){return false;}
      return true;
    }
  </script>
  <script id='wf_anal' src='https://crm.zohopublic.com/crm/WebFormAnalyticsServeServlet?rid=ea30ec3c8428863800ba77e596ca56e91062f29f56ae1a94f677e763f17cb98dafe0b42bdb8331f83c368daa2277d268gid24046eaf8944115beeb38a98805000dcddec21a6ae735b51ca14ac14809a747dgid15c1be8667afd912355b176dce68f23b6473f97cc4fadeee69d70e3427b9d8a1gid41c2a64ed8ce529577da602637056c6616d5a44f3f0123a0780b4d1c364c264c&tw=cbb97ddf7f16f8e31f2228da778a23f76f056733a44b57e8e5e28d095ef16984'></script>

  <style>
    #crmWebToEntityForm{
      position: relative;
    }
  </style>